<link rel="import" href="../../../web_lib/grapp-app-globals/grapp-app-globals.html">
<link rel="import" href="../../../web_lib/grapp-core-ajax/grapp-core-ajax.html">

<polymer-element name="caretaker-widget-cipcamdevice" attributes="widget websocket token">

  <template>

    <link href="../../../web_lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="caretaker-widget-cipcamdevice.css" rel="stylesheet">

    <grapp-app-globals id="globals"></grapp-app-globals>

    <grapp-core-ajax id="imageRequest" url="{{$.globals.apiURL}}/cipcam_device/{{device.specific_id}}/image"
        method="GET" handleAs="arraybuffer" on-core-response="{{updateImage}}" token="{{token}}"
        ></grapp-core-ajax>

    <img id="image" width="320" height="240"/>

    <div id="controls" layout horizontal center-justified>
      <div class="btn-group">
        <button on-tap="{{left}}" class="btn btn-success">Left</button>
        <button on-tap="{{right}}" class="btn btn-success">Right</button>
        <button on-tap="{{up}}" class="btn btn-success">Up</button>
        <button on-tap="{{down}}" class="btn btn-success">Down</button>
      </div>
    </div>

  </template>


  <script src="caretaker-widget-cipcamdevice.js"></script>

</polymer-element>
