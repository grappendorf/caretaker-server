<link rel="import" href="../../web_lib/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../../web_lib/paper-spinner/paper-spinner.html">
<link rel="import" href="../../web_lib/grapp-paper-input/grapp-paper-input.html">
<link rel="import" href="../../web_lib/grapp-paper-button/grapp-paper-button.html">

<polymer-element name="caretaker-login-dialog" attributes="email password processing error">

  <template>

    <paper-action-dialog id="dialog" heading="{{'message.please_log_on' | i18n}}">

      <div vertical layout>
        <grapp-paper-input floatingLabel id="email" label="{{'attributes.user.email' | i18n}}"
                           autofocus?="{{email.length === 0}}" value="{{email}}" validate="^.+@.+$"
                           on-grapp-enter="{{login}}" on-input="{{validate}}">
        </grapp-paper-input>
        <grapp-paper-input floatingLabel id="password" label="{{'attributes.user.password' | i18n}}" type="password"
                           autofocus?="{{email.length > 0}}" value="{{password}}"
                           on-grapp-enter="{{login}}" on-input="{{validate}}">
        </grapp-paper-input>
      </div>

      <template if="{{error}}">
        <grapp-paper-button error dismissive raised>{{error}}</grapp-paper-button>
      </template>

      <grapp-paper-button affirmative raised success disabled?="{{!valid}}">
        <grapp-fa-icon icon="{{ {check: !processing, spinner: processing} | tokenList}}"
                       spin="{{processing}}"></grapp-fa-icon>
        <span>{{'action.sign_in' | i18n}}</span>
      </grapp-paper-button>

    </paper-action-dialog>

  </template>

  <script src="caretaker-login-dialog.js"></script>

</polymer-element>
