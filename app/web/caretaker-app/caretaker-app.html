<link rel="import" href="../../web_lib/core-header-panel/core-header-panel.html">
<link rel="import" href="../../web_lib/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../web_lib/grapp-launcher-tile/grapp-launcher-tile.html">
<link rel="import" href="../../web_lib/grapp-app-globals/grapp-app-globals.html">
<link rel="import" href="../caretaker-websocket/caretaker-websocket.html">
<link rel="import" href="../caretaker-session-manager/caretaker-session-manager.html">
<link rel="import" href="../caretaker-app-toolbar/caretaker-app-toolbar.html">
<link rel="import" href="../caretaker-app-drawer/caretaker-app-drawer.html">
<link rel="import" href="caretaker-app-router.html">

<polymer-element name="caretaker-app">

  <template>

    <link href="caretaker-app.css" rel="stylesheet" shim-shadowdom>

    <grapp-app-globals id="globals"></grapp-app-globals>

    <caretaker-i18n defaultLocale="{{$.globals.defaultLocale}}" locale="{{$.globals.locale}}"></caretaker-i18n>

    <caretaker-session-manager id="sessionManager" on-loaded="{{sessionManagerLoaded}}"></caretaker-session-manager>

    <caretaker-websocket url="{{$.globals.websocketURL}}">
    </caretaker-websocket>

    <core-drawer-panel id="drawer">

      <core-header-panel drawer>

        <core-toolbar class="core-header">
     			<span id="logo">
	    			<span><grapp-fa-icon icon="home"></grapp-fa-icon>Caretaker</span>
          </span>
        </core-toolbar>

        <caretaker-app-drawer fit router="{{router}}" sessionManager="{{$.sessionManager}}"
                              app="{{app}}"></caretaker-app-drawer>

      </core-header-panel>

      <core-header-panel main id="headerPanel" shadow="false" mode="standard"
                         on-grapp-authentication-error="{{authenticationError}}">

        <caretaker-app-toolbar class="core-header" app="{{app}}" sessionManager="{{$.sessionManager}}">
        </caretaker-app-toolbar>

        <div id="content">
          <template if="{{$.sessionManager.token}}">
            <caretaker-app-router sessionManager="{{$.sessionManager}}" router="{{router}}"></caretaker-app-router>
          </template>
        </div>

      </core-header-panel>

    </core-drawer-panel>

  </template>

  <script src="polymer-tools.js"></script>
  <script src="caretaker-app.js"></script>

</polymer-element>
